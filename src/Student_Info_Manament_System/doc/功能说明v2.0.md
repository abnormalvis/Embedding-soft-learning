# 学生信息管理系统 v2.0 - 功能说明

## 🎉 新增功能

### 1. 管理员系统 🔐

#### 管理员账号
- **用户名**: `admin`
- **密码**: `admin123`

#### 管理员功能
1. **添加学生成绩** 📝
   - 根据学生用户名查找学生
   - 为学生添加语文、数学、英语成绩
   - 自动验证学生是否已设置学号

2. **修改学生成绩** ✏️
   - 根据学号查找学生
   - 修改学生的各科成绩
   - 显示修改前的成绩信息

3. **查看所有学生** 👥
   - 表格形式展示所有学生信息
   - 显示学号、用户名、姓名、各科成绩
   - 统计学生总数

4. **删除学生信息** 🗑️
   - 根据用户名删除学生
   - 删除前需要确认操作
   - 防止误删数据

### 2. 学生系统 🎓

#### 学生功能
1. **设置/更新个人信息** 📋
   - 设置学号（必填，用于成绩管理）
   - 设置姓名
   - 设置性别（M/F）
   - 设置年龄

2. **查看我的成绩** 📊
   - 查看基本信息（用户名、学号、姓名、性别、年龄）
   - 查看各科成绩（语文、数学、英语）
   - 自动计算总分和平均分
   - 如无成绩，提示联系管理员添加

### 3. UI界面美化 🎨

#### 彩色终端输出
- 🔵 **蓝色**: 学生相关界面
- 🟢 **绿色**: 成功提示、注册界面
- 🔴 **红色**: 错误提示、删除警告
- 🟡 **黄色**: 警告信息、退出提示
- 🟣 **青色**: 主菜单、管理员界面
- ⚪ **白色**: 菜单选项

#### 界面元素
- ✦ 装饰性符号
- 🔑 登录图标
- 📝 注册图标
- 🚪 退出图标
- ✓ 成功标记
- ✗ 失败标记
- ======== 分隔线

## 📋 使用流程

### 管理员使用流程

```
1. 启动程序 → 选择登录
2. 输入管理员账号
   用户名: admin
   密码: admin123
3. 进入管理员控制台
4. 选择功能：
   ├─ 1) 添加学生成绩
   │   └─ 输入学生用户名 → 输入各科成绩
   ├─ 2) 修改学生成绩
   │   └─ 输入学号 → 输入新成绩
   ├─ 3) 查看所有学生
   │   └─ 显示学生列表
   ├─ 4) 删除学生信息
   │   └─ 输入用户名 → 确认删除
   └─ 5) 退出登录
```

### 学生使用流程

```
1. 首次使用 - 注册账号
   ├─ 选择注册
   ├─ 输入用户名和密码
   └─ 注册成功

2. 登录账号
   ├─ 选择登录
   ├─ 输入用户名和密码
   └─ 进入学生中心

3. 设置个人信息（首次登录必做）
   ├─ 选择"设置/更新个人信息"
   ├─ 输入学号（重要！）
   ├─ 输入姓名
   ├─ 输入性别
   └─ 输入年龄

4. 查看成绩
   ├─ 选择"查看我的成绩"
   ├─ 查看基本信息
   ├─ 查看各科成绩
   ├─ 查看总分和平均分
   └─ 如无成绩，等待管理员添加

5. 退出登录
   └─ 返回主菜单
```

## 🔧 技术实现

### 权限管理
- 用户角色枚举：`ROLE_STUDENT` (学生)、`ROLE_ADMIN` (管理员)
- 管理员硬编码在配置文件中
- 学生注册时自动分配学生角色
- 登录时根据凭证判断角色类型

### 文件操作
- **读取**: 遍历文件查找匹配记录
- **添加**: 追加模式写入新记录
- **修改**: 读取→修改→写入临时文件→替换原文件
- **删除**: 读取→过滤→写入临时文件→替换原文件

### 数据结构
```c
typedef struct {
    studentBase stubase_;      // 基本信息（学号、姓名、性别、年龄）
    StudentScore studscore_;   // 成绩信息（语文、数学、英语）
    studentAccout stuaccout_;  // 账号信息（用户名、密码、角色）
} studentInfo;
```

## 🎯 完整功能清单

### ✅ 已实现功能
- [x] 学生注册
- [x] 学生登录
- [x] 管理员登录
- [x] 管理员添加学生成绩
- [x] 管理员修改学生成绩
- [x] 管理员查看所有学生
- [x] 管理员删除学生信息
- [x] 学生设置个人信息
- [x] 学生添加学号
- [x] 学生查看成绩和总分/平均分
- [x] UI界面彩色美化
- [x] 输入缓冲区管理
- [x] 文件I/O操作
- [x] 角色权限区分

## 📊 数据文件说明

### students.dat 结构
- **格式**: 二进制文件
- **记录**: studentInfo 结构体数组
- **位置**: `data/students.dat`

### 数据示例
```
记录1: {学号:20231001, 姓名:"张三", 用户名:"zhangsan", 角色:学生, 成绩:{85,90,88}}
记录2: {学号:20231002, 姓名:"李四", 用户名:"lisi", 角色:学生, 成绩:{92,87,95}}
```

## ⚠️ 注意事项

1. **首次登录学生**：必须先设置学号，否则管理员无法添加成绩
2. **学号唯一性**：系统不检查学号重复，请学生自行保证唯一性
3. **管理员账号**：不能修改，硬编码在配置文件中
4. **数据备份**：重要数据请定期备份 `data/students.dat` 文件
5. **文件权限**：确保程序对 `data/` 目录有读写权限
6. **删除操作**：管理员删除学生信息后无法恢复

## 🚀 编译和运行

```bash
# 编译
make

# 清理后编译
make clean && make

# 运行
./main
```

## 📝 使用示例

### 示例1：管理员添加学生成绩

```
1. 学生 "zhangsan" 注册账号
2. 学生 "zhangsan" 登录并设置学号为 20231001
3. 管理员登录（admin/admin123）
4. 选择"添加学生成绩"
5. 输入用户名: zhangsan
6. 输入成绩:
   语文: 85
   数学: 90
   英语: 88
7. 成绩添加成功
8. 学生 "zhangsan" 再次登录查看成绩
```

### 示例2：学生查看成绩

```
学生登录后:
1. 选择"设置/更新个人信息"（如果尚未设置）
   - 学号: 20231001
   - 姓名: 张三
   - 性别: M
   - 年龄: 20
   
2. 选择"查看我的成绩"
   显示:
   基本信息:
     用户名: zhangsan
     学号: 20231001
     姓名: 张三
     性别: M
     年龄: 20
   
   成绩信息:
     语文: 85 分
     数学: 90 分
     英语: 88 分
     
     总分: 263 分
     平均分: 87.67 分
```

## 🔮 未来扩展

- [ ] 添加更多学科成绩
- [ ] 实现成绩排名功能
- [ ] 导出成绩报表（Excel/PDF）
- [ ] 密码修改功能
- [ ] 管理员可添加多个
- [ ] 班级管理功能
- [ ] 成绩统计分析（最高分、最低分、平均分）

---

**版本**: v2.0  
**更新日期**: 2025年12月30日  
**开发者**: 开发团队
