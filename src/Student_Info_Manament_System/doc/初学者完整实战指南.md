# å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ - Cè¯­è¨€åˆå­¦è€…å®Œæ•´å®æˆ˜æŒ‡å—

> **é€‚ç”¨å¯¹è±¡**ï¼šå­¦å®ŒCè¯­è¨€åŸºç¡€è¯­æ³•ï¼Œä½†å·¥ç¨‹ç»éªŒè¾ƒå°‘çš„åŒå­¦  
> **é¡¹ç›®ç›®æ ‡**ï¼šä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥å®Œæˆä¸€ä¸ªå¯è¿è¡Œã€å¯äº¤æ¥çš„å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ  
> **æ—¶é—´é¢„ä¼°**ï¼š2-4å‘¨ï¼ˆæ¯å¤©1-2å°æ—¶ï¼‰

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®å‡†å¤‡ - æ­å»ºåŸºç¡€æ¡†æ¶](#ç¬¬ä¸€é˜¶æ®µé¡¹ç›®å‡†å¤‡)
2. [æ•°æ®ç»“æ„è®¾è®¡ - å®šä¹‰å­¦ç”Ÿä¿¡æ¯](#ç¬¬äºŒé˜¶æ®µæ•°æ®ç»“æ„è®¾è®¡)
3. [ç¬¬ä¸€ä¸ªåŠŸèƒ½ - æ·»åŠ å­¦ç”Ÿ](#ç¬¬ä¸‰é˜¶æ®µç¬¬ä¸€ä¸ªåŠŸèƒ½)
4. [æŸ¥è¯¢ä¸æ˜¾ç¤º](#ç¬¬å››é˜¶æ®µæŸ¥è¯¢åŠŸèƒ½)
5. [åˆ é™¤ä¸ä¿®æ”¹](#ç¬¬äº”é˜¶æ®µåˆ é™¤ä¿®æ”¹)
6. [æ–‡ä»¶æŒä¹…åŒ–](#ç¬¬å…­é˜¶æ®µæ–‡ä»¶ä¿å­˜)
7. [å®Œå–„ä¸æµ‹è¯•](#ç¬¬ä¸ƒé˜¶æ®µå®Œå–„æµ‹è¯•)

---

## ğŸ¯ é¡¹ç›®æœ€ç»ˆæ•ˆæœé¢„è§ˆ

```
=== å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ ===
1. æ·»åŠ å­¦ç”Ÿ
2. æŸ¥è¯¢å­¦ç”Ÿ
3. æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ
4. åˆ é™¤å­¦ç”Ÿ
5. ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯
0. é€€å‡ºç³»ç»Ÿ
è¯·é€‰æ‹©æ“ä½œ: 
```

---

## ç¬¬ä¸€é˜¶æ®µï¼šé¡¹ç›®å‡†å¤‡ï¼ˆé¢„è®¡1å¤©ï¼‰

### 1.1 åˆ›å»ºé¡¹ç›®æ–‡ä»¶ç»“æ„

```bash
Student_Info_Manament_System/
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜ï¼ˆç¨ååˆ›å»ºï¼‰
â”œâ”€â”€ Makefile              # ç¼–è¯‘è„šæœ¬ï¼ˆç¨ååˆ›å»ºï¼‰
â”œâ”€â”€ include/              # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ student.h         # å­¦ç”Ÿç»“æ„ä½“å’Œå‡½æ•°å£°æ˜
â”‚   â””â”€â”€ config.h          # é…ç½®å¸¸é‡
â”œâ”€â”€ source/               # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.c           # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ student.c        # å­¦ç”Ÿç®¡ç†åŠŸèƒ½å®ç°
â”‚   â””â”€â”€ menu.c           # èœå•ç•Œé¢å®ç°
â”œâ”€â”€ build/               # ç¼–è¯‘è¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â””â”€â”€ data/                # æ•°æ®æ–‡ä»¶ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ students.dat     # å­¦ç”Ÿæ•°æ®æ–‡ä»¶
```

**æ“ä½œæ­¥éª¤**ï¼š
```bash
cd /home/idris/As-my-see/Embedding-soft-learning/src/Student_Info_Manament_System
mkdir -p include source build data
```

### 1.2 åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆconfig.hï¼‰

è¿™æ˜¯æœ€ç®€å•çš„èµ·ç‚¹ï¼Œå®šä¹‰é¡¹ç›®çš„åŸºæœ¬å¸¸é‡ã€‚

**åˆ›å»ºæ–‡ä»¶**ï¼š`include/config.h`

```c
/**
 * @file config.h
 * @brief é¡¹ç›®é…ç½®å¸¸é‡å®šä¹‰
 */

#ifndef CONFIG_H
#define CONFIG_H

/* å®¹é‡é™åˆ¶ */
#define MAX_STUDENTS 100        // æœ€å¤šç®¡ç†100ä¸ªå­¦ç”Ÿ
#define MAX_NAME_LEN 50         // å§“åæœ€å¤§é•¿åº¦
#define MAX_ID_LEN 20           // å­¦å·æœ€å¤§é•¿åº¦

/* æ–‡ä»¶è·¯å¾„ */
#define DATA_FILE "data/students.dat"  // æ•°æ®æ–‡ä»¶è·¯å¾„

/* è¿”å›å€¼å®šä¹‰ */
#define SUCCESS 1
#define FAILURE 0

/* æ€§åˆ«å®šä¹‰ */
#define GENDER_MALE 'M'
#define GENDER_FEMALE 'F'

#endif // CONFIG_H
```

**ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**
- ç”¨å®å®šä¹‰ä»£æ›¿é­”æ³•æ•°å­—ï¼ˆå¦‚ç›´æ¥å†™100ï¼‰ï¼Œæ–¹ä¾¿åæœŸä¿®æ”¹
- æ‰€æœ‰å¸¸é‡é›†ä¸­ç®¡ç†ï¼Œå…¶ä»–æ–‡ä»¶é€šè¿‡`#include "config.h"`ä½¿ç”¨

**âœ… æ£€æŸ¥ç‚¹**ï¼šæ–‡ä»¶åˆ›å»ºæˆåŠŸï¼Œå†…å®¹æ— è¯­æ³•é”™è¯¯

---

## ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®ç»“æ„è®¾è®¡ï¼ˆé¢„è®¡1å¤©ï¼‰

### 2.1 è®¾è®¡å­¦ç”Ÿä¿¡æ¯ç»“æ„ä½“

**åˆ›å»ºæ–‡ä»¶**ï¼š`include/student.h`

```c
/**
 * @file student.h
 * @brief å­¦ç”Ÿä¿¡æ¯ç»“æ„ä½“å’Œå‡½æ•°å£°æ˜
 */

#ifndef STUDENT_H
#define STUDENT_H

#include "config.h"

/* ============ æ•°æ®ç»“æ„å®šä¹‰ ============ */

/**
 * @brief å­¦ç”ŸåŸºæœ¬ä¿¡æ¯
 */
typedef struct {
    char id[MAX_ID_LEN];        // å­¦å·ï¼ˆå¦‚"2024001"ï¼‰
    char name[MAX_NAME_LEN];    // å§“å
    char gender;                // æ€§åˆ«ï¼ˆ'M'ç”·/'F'å¥³ï¼‰
    int age;                    // å¹´é¾„
} StudentBase;

/**
 * @brief å­¦ç”Ÿæˆç»©ä¿¡æ¯
 */
typedef struct {
    float math;                 // æ•°å­¦æˆç»©
    float english;              // è‹±è¯­æˆç»©
    float c_language;           // Cè¯­è¨€æˆç»©
} StudentScore;

/**
 * @brief å®Œæ•´å­¦ç”Ÿä¿¡æ¯ï¼ˆç»„åˆå‰é¢ä¸¤ä¸ªç»“æ„ä½“ï¼‰
 */
typedef struct {
    StudentBase base;           // åŸºæœ¬ä¿¡æ¯
    StudentScore score;         // æˆç»©ä¿¡æ¯
    int isActive;              // çŠ¶æ€æ ‡è¯†ï¼ˆ1=æœ‰æ•ˆï¼Œ0=å·²åˆ é™¤ï¼‰
} Student;

/**
 * @brief å­¦ç”Ÿç®¡ç†å™¨ï¼ˆç®¡ç†æ‰€æœ‰å­¦ç”Ÿæ•°æ®ï¼‰
 */
typedef struct {
    Student students[MAX_STUDENTS];  // å­¦ç”Ÿæ•°ç»„
    int count;                       // å½“å‰å­¦ç”Ÿæ•°é‡
} StudentManager;

/* ============ å‡½æ•°å£°æ˜ ============ */

/**
 * @brief åˆå§‹åŒ–å­¦ç”Ÿç®¡ç†å™¨
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 */
void initStudentManager(StudentManager* mgr);

/**
 * @brief æ·»åŠ å­¦ç”Ÿ
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 * @param student å¾…æ·»åŠ çš„å­¦ç”Ÿä¿¡æ¯
 * @return SUCCESSæˆåŠŸï¼ŒFAILUREå¤±è´¥
 */
int addStudent(StudentManager* mgr, const Student* student);

/**
 * @brief æ ¹æ®å­¦å·æŸ¥æ‰¾å­¦ç”Ÿ
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 * @param id å­¦å·
 * @return æ‰¾åˆ°è¿”å›å­¦ç”ŸæŒ‡é’ˆï¼Œå¦åˆ™è¿”å›NULL
 */
Student* findStudentById(const StudentManager* mgr, const char* id);

/**
 * @brief æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿä¿¡æ¯
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 */
void displayAllStudents(const StudentManager* mgr);

/**
 * @brief åˆ é™¤å­¦ç”Ÿï¼ˆæ ¹æ®å­¦å·ï¼‰
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 * @param id å­¦å·
 * @return SUCCESSæˆåŠŸï¼ŒFAILUREå¤±è´¥
 */
int deleteStudent(StudentManager* mgr, const char* id);

/**
 * @brief ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 * @param id å­¦å·
 * @return SUCCESSæˆåŠŸï¼ŒFAILUREå¤±è´¥
 */
int updateStudent(StudentManager* mgr, const char* id);

/**
 * @brief ä¿å­˜æ•°æ®åˆ°æ–‡ä»¶
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 * @return SUCCESSæˆåŠŸï¼ŒFAILUREå¤±è´¥
 */
int saveToFile(const StudentManager* mgr);

/**
 * @brief ä»æ–‡ä»¶åŠ è½½æ•°æ®
 * @param mgr ç®¡ç†å™¨æŒ‡é’ˆ
 * @return SUCCESSæˆåŠŸï¼ŒFAILUREå¤±è´¥
 */
int loadFromFile(StudentManager* mgr);

#endif // STUDENT_H
```

**ğŸ’¡ è®¾è®¡è¦ç‚¹**ï¼š
1. **åˆ†å±‚ç»“æ„**ï¼š`StudentBase` + `StudentScore` â†’ `Student`ï¼Œä¾¿äºæ‰©å±•
2. **å®šé•¿æ•°ç»„**ï¼šç”¨`char id[20]`è€Œé`char* id`ï¼Œé¿å…åŠ¨æ€å†…å­˜ç®¡ç†å¤æ‚åº¦
3. **è½¯åˆ é™¤**ï¼š`isActive`æ ‡è®°ä»£æ›¿ç‰©ç†åˆ é™¤ï¼Œæ•°æ®æ›´å®‰å…¨

**âœ… æ£€æŸ¥ç‚¹**ï¼šç¼–è¯‘æ£€æŸ¥å¤´æ–‡ä»¶
```bash
gcc -c -I./include include/student.h
```
ï¼ˆåº”æ— æŠ¥é”™ï¼Œä½†ä¼šæç¤ºæ²¡æœ‰.oæ–‡ä»¶è¾“å‡ºï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼‰

---

## ç¬¬ä¸‰é˜¶æ®µï¼šç¬¬ä¸€ä¸ªåŠŸèƒ½ - æ·»åŠ å­¦ç”Ÿï¼ˆé¢„è®¡2å¤©ï¼‰

### 3.1 å®ç°æ ¸å¿ƒå‡½æ•°ï¼ˆstudent.cï¼‰

**åˆ›å»ºæ–‡ä»¶**ï¼š`source/student.c`

```c
/**
 * @file student.c
 * @brief å­¦ç”Ÿç®¡ç†åŠŸèƒ½å®ç°
 */

#include <stdio.h>
#include <string.h>
#include "student.h"

/* ============ å·¥å…·å‡½æ•°ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰============ */

/**
 * @brief æ¸…ç†è¾“å…¥ç¼“å†²åŒºï¼ˆè§£å†³scanfæ®‹ç•™æ¢è¡Œç¬¦é—®é¢˜ï¼‰
 */
static void clearInputBuffer() {
    int c;
    while ((c = getchar()) != '\n' && c != EOF);
}

/**
 * @brief å®‰å…¨è¯»å–å­—ç¬¦ä¸²ï¼ˆé˜²æ­¢ç¼“å†²åŒºæº¢å‡ºï¼‰
 * @param buffer ç›®æ ‡ç¼“å†²åŒº
 * @param size ç¼“å†²åŒºå¤§å°
 */
static void safeReadString(char* buffer, int size) {
    if (fgets(buffer, size, stdin) != NULL) {
        // å»é™¤æœ«å°¾çš„æ¢è¡Œç¬¦
        size_t len = strlen(buffer);
        if (len > 0 && buffer[len - 1] == '\n') {
            buffer[len - 1] = '\0';
        }
    }
}

/* ============ ä¸»è¦åŠŸèƒ½å®ç° ============ */

void initStudentManager(StudentManager* mgr) {
    if (mgr == NULL) return;
    
    mgr->count = 0;
    // åˆå§‹åŒ–æ‰€æœ‰å­¦ç”Ÿä¸ºéæ´»è·ƒçŠ¶æ€
    for (int i = 0; i < MAX_STUDENTS; i++) {
        mgr->students[i].isActive = 0;
    }
    printf("[ç³»ç»Ÿ] å­¦ç”Ÿç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ\n");
}

int addStudent(StudentManager* mgr, const Student* student) {
    // 1. å‚æ•°æ£€æŸ¥
    if (mgr == NULL || student == NULL) {
        printf("[é”™è¯¯] å‚æ•°æ— æ•ˆ\n");
        return FAILURE;
    }
    
    // 2. å®¹é‡æ£€æŸ¥
    if (mgr->count >= MAX_STUDENTS) {
        printf("[é”™è¯¯] å­¦ç”Ÿæ•°é‡å·²è¾¾ä¸Šé™ï¼ˆ%dï¼‰\n", MAX_STUDENTS);
        return FAILURE;
    }
    
    // 3. å­¦å·é‡å¤æ£€æŸ¥
    if (findStudentById(mgr, student->base.id) != NULL) {
        printf("[é”™è¯¯] å­¦å·ã€%sã€‘å·²å­˜åœ¨\n", student->base.id);
        return FAILURE;
    }
    
    // 4. æ·»åŠ å­¦ç”Ÿ
    mgr->students[mgr->count] = *student;
    mgr->students[mgr->count].isActive = 1;  // æ ‡è®°ä¸ºæœ‰æ•ˆ
    mgr->count++;
    
    printf("[æˆåŠŸ] å­¦ç”Ÿã€%sã€‘æ·»åŠ æˆåŠŸ\n", student->base.name);
    return SUCCESS;
}

Student* findStudentById(const StudentManager* mgr, const char* id) {
    if (mgr == NULL || id == NULL) return NULL;
    
    for (int i = 0; i < mgr->count; i++) {
        if (mgr->students[i].isActive && 
            strcmp(mgr->students[i].base.id, id) == 0) {
            return &mgr->students[i];  // æ³¨æ„ï¼šè¿”å›çš„æ˜¯æŒ‡é’ˆ
        }
    }
    return NULL;  // æœªæ‰¾åˆ°
}

void displayAllStudents(const StudentManager* mgr) {
    if (mgr == NULL) return;
    
    if (mgr->count == 0) {
        printf("\n[æç¤º] å½“å‰æ²¡æœ‰å­¦ç”Ÿä¿¡æ¯\n\n");
        return;
    }
    
    printf("\n========== å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ ==========\n");
    printf("%-10s %-15s %-6s %-5s %-6s %-6s %-6s\n", 
           "å­¦å·", "å§“å", "æ€§åˆ«", "å¹´é¾„", "æ•°å­¦", "è‹±è¯­", "Cè¯­è¨€");
    printf("----------------------------------------------------------\n");
    
    for (int i = 0; i < mgr->count; i++) {
        if (mgr->students[i].isActive) {
            Student* s = &mgr->students[i];
            printf("%-10s %-15s %-6c %-5d %-6.1f %-6.1f %-6.1f\n",
                   s->base.id,
                   s->base.name,
                   s->base.gender,
                   s->base.age,
                   s->score.math,
                   s->score.english,
                   s->score.c_language);
        }
    }
    printf("===================================\n\n");
}

int deleteStudent(StudentManager* mgr, const char* id) {
    if (mgr == NULL || id == NULL) return FAILURE;
    
    Student* s = findStudentById(mgr, id);
    if (s == NULL) {
        printf("[é”™è¯¯] å­¦å·ã€%sã€‘ä¸å­˜åœ¨\n", id);
        return FAILURE;
    }
    
    s->isActive = 0;  // è½¯åˆ é™¤
    printf("[æˆåŠŸ] å­¦ç”Ÿã€%sã€‘å·²åˆ é™¤\n", s->base.name);
    return SUCCESS;
}

int updateStudent(StudentManager* mgr, const char* id) {
    if (mgr == NULL || id == NULL) return FAILURE;
    
    Student* s = findStudentById(mgr, id);
    if (s == NULL) {
        printf("[é”™è¯¯] å­¦å·ã€%sã€‘ä¸å­˜åœ¨\n", id);
        return FAILURE;
    }
    
    printf("\nå½“å‰ä¿¡æ¯ï¼š\n");
    printf("å­¦å·: %s\n", s->base.id);
    printf("å§“å: %s\n", s->base.name);
    printf("æ€§åˆ«: %c\n", s->base.gender);
    printf("å¹´é¾„: %d\n", s->base.age);
    printf("æ•°å­¦: %.1f\n", s->score.math);
    printf("è‹±è¯­: %.1f\n", s->score.english);
    printf("Cè¯­è¨€: %.1f\n", s->score.c_language);
    
    printf("\nè¯·è¾“å…¥æ–°çš„ä¿¡æ¯ï¼ˆå§“åï¼‰: ");
    clearInputBuffer();
    safeReadString(s->base.name, MAX_NAME_LEN);
    
    printf("è¯·è¾“å…¥æ€§åˆ«ï¼ˆM/Fï¼‰: ");
    scanf(" %c", &s->base.gender);  // æ³¨æ„ç©ºæ ¼ï¼Œè·³è¿‡å‰å¯¼ç©ºç™½
    
    printf("è¯·è¾“å…¥å¹´é¾„: ");
    scanf("%d", &s->base.age);
    
    printf("è¯·è¾“å…¥æ•°å­¦æˆç»©: ");
    scanf("%f", &s->score.math);
    
    printf("è¯·è¾“å…¥è‹±è¯­æˆç»©: ");
    scanf("%f", &s->score.english);
    
    printf("è¯·è¾“å…¥Cè¯­è¨€æˆç»©: ");
    scanf("%f", &s->score.c_language);
    
    printf("[æˆåŠŸ] å­¦ç”Ÿä¿¡æ¯å·²æ›´æ–°\n");
    return SUCCESS;
}

/* ============ æ–‡ä»¶æ“ä½œï¼ˆç¬¬å…­é˜¶æ®µå®ç°ï¼‰============ */

int saveToFile(const StudentManager* mgr) {
    if (mgr == NULL) return FAILURE;
    
    FILE* fp = fopen(DATA_FILE, "wb");
    if (fp == NULL) {
        printf("[é”™è¯¯] æ— æ³•åˆ›å»ºæ•°æ®æ–‡ä»¶\n");
        return FAILURE;
    }
    
    // å†™å…¥å­¦ç”Ÿæ•°é‡
    fwrite(&mgr->count, sizeof(int), 1, fp);
    
    // å†™å…¥å­¦ç”Ÿæ•°æ®
    fwrite(mgr->students, sizeof(Student), mgr->count, fp);
    
    fclose(fp);
    printf("[æˆåŠŸ] æ•°æ®å·²ä¿å­˜åˆ° %s\n", DATA_FILE);
    return SUCCESS;
}

int loadFromFile(StudentManager* mgr) {
    if (mgr == NULL) return FAILURE;
    
    FILE* fp = fopen(DATA_FILE, "rb");
    if (fp == NULL) {
        printf("[æç¤º] æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†ä»ç©ºç™½å¼€å§‹\n");
        return SUCCESS;  // ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶æ–‡ä»¶ä¸å­˜åœ¨æ˜¯æ­£å¸¸çš„
    }
    
    // è¯»å–å­¦ç”Ÿæ•°é‡
    fread(&mgr->count, sizeof(int), 1, fp);
    
    // è¯»å–å­¦ç”Ÿæ•°æ®
    fread(mgr->students, sizeof(Student), mgr->count, fp);
    
    fclose(fp);
    printf("[æˆåŠŸ] ä»æ–‡ä»¶åŠ è½½äº† %d æ¡å­¦ç”Ÿè®°å½•\n", mgr->count);
    return SUCCESS;
}
```

### 3.2 å®ç°èœå•ç•Œé¢ï¼ˆmenu.cï¼‰

**åˆ›å»ºæ–‡ä»¶**ï¼š`source/menu.c`

```c
/**
 * @file menu.c
 * @brief èœå•ç•Œé¢å®ç°
 */

#include <stdio.h>
#include "student.h"

/**
 * @brief æ˜¾ç¤ºä¸»èœå•
 */
void showMainMenu() {
    printf("\n========== å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ ==========\n");
    printf("1. æ·»åŠ å­¦ç”Ÿ\n");
    printf("2. æŸ¥è¯¢å­¦ç”Ÿ\n");
    printf("3. æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ\n");
    printf("4. åˆ é™¤å­¦ç”Ÿ\n");
    printf("5. ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯\n");
    printf("0. é€€å‡ºç³»ç»Ÿ\n");
    printf("======================================\n");
    printf("è¯·é€‰æ‹©æ“ä½œ: ");
}

/**
 * @brief è·å–èœå•é€‰æ‹©ï¼ˆå¸¦è¾“å…¥éªŒè¯ï¼‰
 */
int getMenuChoice() {
    int choice;
    while (scanf("%d", &choice) != 1) {
        // æ¸…ç†æ— æ•ˆè¾“å…¥
        while (getchar() != '\n');
        printf("[é”™è¯¯] è¾“å…¥æ— æ•ˆï¼Œè¯·è¾“å…¥æ•°å­—: ");
    }
    return choice;
}

/**
 * @brief æ·»åŠ å­¦ç”Ÿçš„äº¤äº’ç•Œé¢
 */
void handleAddStudent(StudentManager* mgr) {
    Student newStudent = {0};  // åˆå§‹åŒ–ä¸º0
    
    printf("\n========== æ·»åŠ å­¦ç”Ÿ ==========\n");
    
    // æ¸…ç†è¾“å…¥ç¼“å†²åŒº
    while (getchar() != '\n');
    
    printf("è¯·è¾“å…¥å­¦å·: ");
    fgets(newStudent.base.id, MAX_ID_LEN, stdin);
    newStudent.base.id[strcspn(newStudent.base.id, "\n")] = '\0';  // å»æ¢è¡Œ
    
    printf("è¯·è¾“å…¥å§“å: ");
    fgets(newStudent.base.name, MAX_NAME_LEN, stdin);
    newStudent.base.name[strcspn(newStudent.base.name, "\n")] = '\0';
    
    printf("è¯·è¾“å…¥æ€§åˆ«ï¼ˆM/Fï¼‰: ");
    scanf(" %c", &newStudent.base.gender);
    
    printf("è¯·è¾“å…¥å¹´é¾„: ");
    scanf("%d", &newStudent.base.age);
    
    printf("è¯·è¾“å…¥æ•°å­¦æˆç»©: ");
    scanf("%f", &newStudent.score.math);
    
    printf("è¯·è¾“å…¥è‹±è¯­æˆç»©: ");
    scanf("%f", &newStudent.score.english);
    
    printf("è¯·è¾“å…¥Cè¯­è¨€æˆç»©: ");
    scanf("%f", &newStudent.score.c_language);
    
    addStudent(mgr, &newStudent);
}

/**
 * @brief æŸ¥è¯¢å­¦ç”Ÿçš„äº¤äº’ç•Œé¢
 */
void handleQueryStudent(const StudentManager* mgr) {
    char id[MAX_ID_LEN];
    
    printf("\n========== æŸ¥è¯¢å­¦ç”Ÿ ==========\n");
    
    // æ¸…ç†è¾“å…¥ç¼“å†²åŒº
    while (getchar() != '\n');
    
    printf("è¯·è¾“å…¥å­¦å·: ");
    fgets(id, MAX_ID_LEN, stdin);
    id[strcspn(id, "\n")] = '\0';
    
    Student* s = findStudentById(mgr, id);
    if (s != NULL) {
        printf("\nå­¦å·: %s\n", s->base.id);
        printf("å§“å: %s\n", s->base.name);
        printf("æ€§åˆ«: %c\n", s->base.gender);
        printf("å¹´é¾„: %d\n", s->base.age);
        printf("æ•°å­¦: %.1f\n", s->score.math);
        printf("è‹±è¯­: %.1f\n", s->score.english);
        printf("Cè¯­è¨€: %.1f\n", s->score.c_language);
    } else {
        printf("[æç¤º] æœªæ‰¾åˆ°å­¦å·ä¸ºã€%sã€‘çš„å­¦ç”Ÿ\n", id);
    }
}

/**
 * @brief åˆ é™¤å­¦ç”Ÿçš„äº¤äº’ç•Œé¢
 */
void handleDeleteStudent(StudentManager* mgr) {
    char id[MAX_ID_LEN];
    
    printf("\n========== åˆ é™¤å­¦ç”Ÿ ==========\n");
    
    // æ¸…ç†è¾“å…¥ç¼“å†²åŒº
    while (getchar() != '\n');
    
    printf("è¯·è¾“å…¥è¦åˆ é™¤çš„å­¦å·: ");
    fgets(id, MAX_ID_LEN, stdin);
    id[strcspn(id, "\n")] = '\0';
    
    deleteStudent(mgr, id);
}

/**
 * @brief ä¿®æ”¹å­¦ç”Ÿçš„äº¤äº’ç•Œé¢
 */
void handleUpdateStudent(StudentManager* mgr) {
    char id[MAX_ID_LEN];
    
    printf("\n========== ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯ ==========\n");
    
    // æ¸…ç†è¾“å…¥ç¼“å†²åŒº
    while (getchar() != '\n');
    
    printf("è¯·è¾“å…¥è¦ä¿®æ”¹çš„å­¦å·: ");
    fgets(id, MAX_ID_LEN, stdin);
    id[strcspn(id, "\n")] = '\0';
    
    updateStudent(mgr, id);
}
```

### 3.3 å®ç°ä¸»ç¨‹åºï¼ˆmain.cï¼‰

**åˆ›å»ºæ–‡ä»¶**ï¼š`source/main.c`

```c
/**
 * @file main.c
 * @brief ä¸»ç¨‹åºå…¥å£
 */

#include <stdio.h>
#include "student.h"

// å£°æ˜menu.cä¸­çš„å‡½æ•°
void showMainMenu();
int getMenuChoice();
void handleAddStudent(StudentManager* mgr);
void handleQueryStudent(const StudentManager* mgr);
void handleDeleteStudent(StudentManager* mgr);
void handleUpdateStudent(StudentManager* mgr);

int main() {
    StudentManager manager;
    
    // åˆå§‹åŒ–
    initStudentManager(&manager);
    
    // ä»æ–‡ä»¶åŠ è½½å†å²æ•°æ®
    loadFromFile(&manager);
    
    printf("\næ¬¢è¿ä½¿ç”¨å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼\n");
    
    int choice;
    do {
        showMainMenu();
        choice = getMenuChoice();
        
        switch (choice) {
            case 1:
                handleAddStudent(&manager);
                break;
            case 2:
                handleQueryStudent(&manager);
                break;
            case 3:
                displayAllStudents(&manager);
                break;
            case 4:
                handleDeleteStudent(&manager);
                break;
            case 5:
                handleUpdateStudent(&manager);
                break;
            case 0:
                // é€€å‡ºå‰ä¿å­˜æ•°æ®
                saveToFile(&manager);
                printf("\næ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼\n\n");
                break;
            default:
                printf("[é”™è¯¯] æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥\n");
        }
    } while (choice != 0);
    
    return 0;
}
```

### 3.4 ç¼–è¯‘ä¸è¿è¡Œ

**åˆ›å»ºMakefile**ï¼š

```makefile
# ç¼–è¯‘å™¨è®¾ç½®
CC = gcc
CFLAGS = -Wall -Wextra -I./include -g

# ç›®å½•è®¾ç½®
SRC_DIR = source
BUILD_DIR = build
INC_DIR = include

# æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶
SRCS = $(wildcard $(SRC_DIR)/*.c)
OBJS = $(patsubst $(SRC_DIR)/%.c, $(BUILD_DIR)/%.o, $(SRCS))
TARGET = $(BUILD_DIR)/student_system

# é»˜è®¤ç›®æ ‡
all: $(TARGET)

# é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
$(TARGET): $(OBJS) | $(BUILD_DIR)
	$(CC) $(OBJS) -o $(TARGET)
	@echo "ç¼–è¯‘å®Œæˆï¼è¿è¡Œå‘½ä»¤: ./$(TARGET)"

# ç¼–è¯‘æºæ–‡ä»¶ä¸ºç›®æ ‡æ–‡ä»¶
$(BUILD_DIR)/%.o: $(SRC_DIR)/%.c | $(BUILD_DIR)
	$(CC) $(CFLAGS) -c $< -o $@

# åˆ›å»ºbuildç›®å½•
$(BUILD_DIR):
	mkdir -p $(BUILD_DIR)

# æ¸…ç†ç¼–è¯‘æ–‡ä»¶
clean:
	rm -rf $(BUILD_DIR)

# è¿è¡Œç¨‹åº
run: $(TARGET)
	./$(TARGET)

.PHONY: all clean run
```

**ç¼–è¯‘æ­¥éª¤**ï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/idris/As-my-see/Embedding-soft-learning/src/Student_Info_Manament_System

# 2. ç¼–è¯‘é¡¹ç›®
make

# 3. è¿è¡Œç¨‹åº
make run

# æˆ–ç›´æ¥è¿è¡Œ
./build/student_system
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[ç³»ç»Ÿ] å­¦ç”Ÿç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ
[æç¤º] æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†ä»ç©ºç™½å¼€å§‹

æ¬¢è¿ä½¿ç”¨å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼

========== å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ ==========
1. æ·»åŠ å­¦ç”Ÿ
2. æŸ¥è¯¢å­¦ç”Ÿ
3. æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ
4. åˆ é™¤å­¦ç”Ÿ
5. ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯
0. é€€å‡ºç³»ç»Ÿ
======================================
è¯·é€‰æ‹©æ“ä½œ: 
```

**âœ… æ£€æŸ¥ç‚¹**ï¼š
- [ ] ç¼–è¯‘æ— é”™è¯¯å’Œè­¦å‘Š
- [ ] ç¨‹åºèƒ½æ­£å¸¸å¯åŠ¨
- [ ] èœå•æ˜¾ç¤ºæ­£ç¡®
- [ ] èƒ½æ·»åŠ ä¸€ä¸ªå­¦ç”Ÿå¹¶æ˜¾ç¤º

---

## ç¬¬å››åˆ°ç¬¬ä¸ƒé˜¶æ®µï¼ˆæŸ¥è¯¢ã€åˆ é™¤ã€æ–‡ä»¶ã€æµ‹è¯•ï¼‰

è¿™äº›åŠŸèƒ½å·²ç»åœ¨ä¸Šé¢çš„ä»£ç ä¸­å®ç°äº†ï¼ç°åœ¨ä½ å¯ä»¥ï¼š

### æµ‹è¯•æµç¨‹

**æµ‹è¯•1ï¼šæ·»åŠ å­¦ç”Ÿ**
```
é€‰æ‹©æ“ä½œ: 1
è¯·è¾“å…¥å­¦å·: 2024001
è¯·è¾“å…¥å§“å: å¼ ä¸‰
è¯·è¾“å…¥æ€§åˆ«ï¼ˆM/Fï¼‰: M
è¯·è¾“å…¥å¹´é¾„: 20
è¯·è¾“å…¥æ•°å­¦æˆç»©: 95
è¯·è¾“å…¥è‹±è¯­æˆç»©: 88
è¯·è¾“å…¥Cè¯­è¨€æˆç»©: 92
[æˆåŠŸ] å­¦ç”Ÿã€å¼ ä¸‰ã€‘æ·»åŠ æˆåŠŸ
```

**æµ‹è¯•2ï¼šæ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ**
```
é€‰æ‹©æ“ä½œ: 3
========== å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ ==========
å­¦å·       å§“å            æ€§åˆ«   å¹´é¾„  æ•°å­¦   è‹±è¯­   Cè¯­è¨€
----------------------------------------------------------
2024001    å¼ ä¸‰            M      20    95.0   88.0   92.0
===================================
```

**æµ‹è¯•3ï¼šé€€å‡ºå¹¶é‡å¯ï¼ˆéªŒè¯æ–‡ä»¶ä¿å­˜ï¼‰**
```
é€‰æ‹©æ“ä½œ: 0
[æˆåŠŸ] æ•°æ®å·²ä¿å­˜åˆ° data/students.dat
æ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼

# é‡æ–°è¿è¡Œ
./build/student_system
[æˆåŠŸ] ä»æ–‡ä»¶åŠ è½½äº† 1 æ¡å­¦ç”Ÿè®°å½•
```

---

## ğŸ› å¸¸è§é—®é¢˜ä¸è§£å†³

### é—®é¢˜1ï¼šç¼–è¯‘æ—¶æ‰¾ä¸åˆ°å¤´æ–‡ä»¶
```bash
fatal error: student.h: No such file or directory
```
**è§£å†³**ï¼šæ£€æŸ¥Makefileä¸­çš„`-I./include`é€‰é¡¹ï¼Œç¡®ä¿includeç›®å½•å­˜åœ¨

### é—®é¢˜2ï¼šè¾“å…¥åç›´æ¥è·³è¿‡
**åŸå› **ï¼š`scanf`æ®‹ç•™æ¢è¡Œç¬¦  
**è§£å†³**ï¼šä½¿ç”¨`clearInputBuffer()`æˆ–åœ¨`scanf`å‰åŠ ç©ºæ ¼ï¼ˆå¦‚`scanf(" %c", &gender)`ï¼‰

### é—®é¢˜3ï¼šä¸­æ–‡æ˜¾ç¤ºä¹±ç 
**è§£å†³**ï¼š
```bash
# Linux
export LANG=zh_CN.UTF-8

# æˆ–åœ¨ä»£ç ä¸­è®¾ç½®
setlocale(LC_ALL, "zh_CN.UTF-8");
```

### é—®é¢˜4ï¼šæ•°æ®æ–‡ä»¶æ— æ³•åˆ›å»º
**è§£å†³**ï¼šç¡®ä¿dataç›®å½•å­˜åœ¨
```bash
mkdir -p data
```

---

## ğŸ“š è¿›é˜¶æ‰©å±•ï¼ˆå®ŒæˆåŸºç¡€åæŒ‘æˆ˜ï¼‰

1. **ç”¨æˆ·ç™»å½•åŠŸèƒ½**ï¼šæ·»åŠ ç”¨æˆ·åå¯†ç éªŒè¯
2. **æŒ‰å§“åæŸ¥è¯¢**ï¼šå®ç°æ¨¡ç³Šæœç´¢
3. **æˆç»©æ’åº**ï¼šæŒ‰æ€»åˆ†/å•ç§‘æ’åº
4. **ç»Ÿè®¡åŠŸèƒ½**ï¼šè®¡ç®—å¹³å‡åˆ†ã€åŠæ ¼ç‡
5. **æ•°æ®å¤‡ä»½**ï¼šä¿å­˜å‰åˆ›å»ºå¤‡ä»½æ–‡ä»¶
6. **è¾“å…¥éªŒè¯**ï¼šå¹´é¾„èŒƒå›´ï¼ˆ0-150ï¼‰ã€æˆç»©èŒƒå›´ï¼ˆ0-100ï¼‰

---

## ğŸ“ å·¥ç¨‹è§„èŒƒæ£€æŸ¥æ¸…å•

å®Œæˆé¡¹ç›®åï¼Œç”¨è¿™ä¸ªæ¸…å•è‡ªæ£€ï¼š

- [ ] **ä»£ç é£æ ¼**ï¼šç¼©è¿›ç»Ÿä¸€ï¼ˆ4ç©ºæ ¼ï¼‰ï¼Œå¤§æ‹¬å·æ¢è¡Œ
- [ ] **å‘½åè§„èŒƒ**ï¼šå‡½æ•°å°é©¼å³°ï¼ˆ`addStudent`ï¼‰ï¼Œå¸¸é‡å¤§å†™ï¼ˆ`MAX_STUDENTS`ï¼‰
- [ ] **æ³¨é‡Šå®Œæ•´**ï¼šæ¯ä¸ªå‡½æ•°æœ‰è¯´æ˜ï¼Œå…³é”®é€»è¾‘æœ‰æ³¨é‡Š
- [ ] **é”™è¯¯å¤„ç†**ï¼šæŒ‡é’ˆåˆ¤ç©ºï¼Œè¿”å›å€¼æ£€æŸ¥ï¼Œæ–‡ä»¶æ“ä½œæ£€æŸ¥
- [ ] **å†…å­˜å®‰å…¨**ï¼šæ— ç¼“å†²åŒºæº¢å‡ºï¼ˆç”¨`fgets`ä»£æ›¿`gets`ï¼‰
- [ ] **æ–‡ä»¶ç»“æ„**ï¼šå¤´æ–‡ä»¶ã€æºæ–‡ä»¶åˆ†ç¦»ï¼Œç¼–è¯‘è„šæœ¬å®Œæ•´
- [ ] **æµ‹è¯•è¦†ç›–**ï¼šæ¯ä¸ªåŠŸèƒ½éƒ½æµ‹è¯•è¿‡ï¼ˆæ­£å¸¸+å¼‚å¸¸æƒ…å†µï¼‰
- [ ] **æ–‡æ¡£é½å…¨**ï¼šREADMEè¯´æ˜å¦‚ä½•ç¼–è¯‘å’Œè¿è¡Œ

---

## ğŸ“ README.md æ¨¡æ¿

**åˆ›å»ºæ–‡ä»¶**ï¼š`README.md`

```markdown
# å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹
ä½¿ç”¨Cè¯­è¨€å®ç°çš„å‘½ä»¤è¡Œå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå­¦ç”Ÿä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥å’Œæ–‡ä»¶æŒä¹…åŒ–ã€‚

## åŠŸèƒ½åˆ—è¡¨
- âœ… æ·»åŠ å­¦ç”Ÿä¿¡æ¯
- âœ… æŸ¥è¯¢å­¦ç”Ÿï¼ˆæŒ‰å­¦å·ï¼‰
- âœ… æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ
- âœ… åˆ é™¤å­¦ç”Ÿ
- âœ… ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯
- âœ… æ•°æ®æ–‡ä»¶ä¿å­˜å’ŒåŠ è½½

## ç¼–è¯‘ä¸è¿è¡Œ

### ç¼–è¯‘
```bash
make
```

### è¿è¡Œ
```bash
make run
# æˆ–
./build/student_system
```

### æ¸…ç†
```bash
make clean
```

## é¡¹ç›®ç»“æ„
```
Student_Info_Manament_System/
â”œâ”€â”€ include/           # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ config.h      # é…ç½®å¸¸é‡
â”‚   â””â”€â”€ student.h     # å­¦ç”Ÿç»“æ„ä½“å’Œå‡½æ•°å£°æ˜
â”œâ”€â”€ source/           # æºä»£ç 
â”‚   â”œâ”€â”€ main.c        # ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ student.c     # å­¦ç”Ÿç®¡ç†åŠŸèƒ½
â”‚   â””â”€â”€ menu.c        # èœå•ç•Œé¢
â”œâ”€â”€ build/            # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ data/             # æ•°æ®æ–‡ä»¶
â””â”€â”€ Makefile          # ç¼–è¯‘è„šæœ¬
```

## å¼€å‘ç¯å¢ƒ
- ç¼–è¯‘å™¨ï¼šGCC 9.0+
- æ“ä½œç³»ç»Ÿï¼šLinux / macOS / Windowsï¼ˆMinGWï¼‰
- Cæ ‡å‡†ï¼šC99

## ä½œè€…
[ä½ çš„åå­—]

## è®¸å¯
MIT License
```

---

## ğŸ¯ æ€»ç»“

æ­å–œï¼å¦‚æœä½ å®Œæˆåˆ°è¿™é‡Œï¼Œä½ å·²ç»ï¼š

1. âœ… æŒæ¡äº†**æ¨¡å—åŒ–è®¾è®¡**ï¼ˆå¤´æ–‡ä»¶/æºæ–‡ä»¶åˆ†ç¦»ï¼‰
2. âœ… å­¦ä¼šäº†**ç»“æ„ä½“ç»„åˆ**ï¼ˆåˆ†å±‚æ•°æ®è®¾è®¡ï¼‰
3. âœ… å®ç°äº†**æ–‡ä»¶æŒä¹…åŒ–**ï¼ˆäºŒè¿›åˆ¶è¯»å†™ï¼‰
4. âœ… å¤„ç†äº†**è¾“å…¥å®‰å…¨**ï¼ˆç¼“å†²åŒºæº¢å‡ºé˜²æŠ¤ï¼‰
5. âœ… åº”ç”¨äº†**å·¥ç¨‹è§„èŒƒ**ï¼ˆæ³¨é‡Šã€å‘½åã€é”™è¯¯å¤„ç†ï¼‰

**ä¸‹ä¸€æ­¥å»ºè®®**ï¼š
- è®©åŒå­¦Reviewä½ çš„ä»£ç 
- å°è¯•æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½ï¼ˆå¦‚æŒ‰å§“åæŸ¥è¯¢ï¼‰
- å­¦ä¹ ä½¿ç”¨è°ƒè¯•å·¥å…·ï¼ˆgdbï¼‰
- å°†é¡¹ç›®ä¸Šä¼ åˆ°GitHub

**è®°ä½**ï¼šå¥½çš„ç¨‹åºå‘˜ä¸æ˜¯è®°ä½æ‰€æœ‰è¯­æ³•ï¼Œè€Œæ˜¯çŸ¥é“å¦‚ä½•æŸ¥èµ„æ–™ã€å¦‚ä½•è®¾è®¡ã€å¦‚ä½•æµ‹è¯•ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯ä½ å·¥ç¨‹åŒ–æ€ç»´çš„èµ·ç‚¹ï¼ŒåšæŒä¸‹å»ï¼

---

## é™„å½•ï¼šå¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ç¼–è¯‘é¡¹ç›®
make

# è¿è¡Œç¨‹åº
make run

# æ¸…ç†ç¼–è¯‘æ–‡ä»¶
make clean

# æŸ¥çœ‹ç¼–è¯‘è¿‡ç¨‹ï¼ˆè°ƒè¯•ç”¨ï¼‰
make -n

# æ£€æŸ¥å†…å­˜æ³„æ¼ï¼ˆLinuxï¼‰
valgrind --leak-check=full ./build/student_system

# æŸ¥çœ‹ç¨‹åºä¾èµ–ï¼ˆLinuxï¼‰
ldd ./build/student_system
```

---

**ç¥å­¦ä¹ é¡ºåˆ©ï¼é‡åˆ°é—®é¢˜éšæ—¶æŸ¥çœ‹è¿™ä»½æ–‡æ¡£æˆ–æé—®ã€‚è®°ä½ï¼šæ¯ä¸ªå¤§ç¥éƒ½æ˜¯ä»Hello Worldå¼€å§‹çš„ï¼** ğŸš€
